{% extends "pages/home.html" %}
{% load static %}
{% block title %}Profile{% endblock %}

{% block header %}

    <h2> Profile</h2>
    <hr>
    {% endblock header %}
    {% block feature %}
    {% if messages %}
    <ul class="messages">
        {% for message in messages %}
        <li>{{ message }}</li>
        {% endfor %}
    </ul>
    {% endif %}
    <div class="container" id="profilecontainer">
       
        <div id="profile" class = "container">
            
            {% if student.profile_picture %}
            <img src="{{ student.profile_picture.url }}" alt="Profile Picture" width="150" style="margin-bottom: 2em;">
            {% else %}
            <img src="{% static 'images/Default_avatar.webp' %}" alt="Default Profile Picture" width="150" style="margin-bottom: 2em;" >
            {% endif %}
            <a class="btn btn-warning" href="{% url 'edit_student_profile' %}" style="display: block; width: 30%; margin-left: 7.4em;"> <i class="bi bi-pencil-square"></i> Edit</a>
            <table class="table table-responsive " style=>
            <tr>
            <th>Student Number: </th>
            <td>{{ student.student_number }}</td>
             </tr>

            <tr>
            <th>Name: </th>
            <td>{{ student.first_name }} {{ student.last_name }}</td>
             </tr>

            <tr>

            <th>Email: </th>
            <td >{{ student.email }} </td>  
            </tr>

            <tr>
      
            <th>Contact Number: </th>
            <td>{{ student.contact_no }} </td>
            </tr>

            <tr>
            <th>Status: </th>
            <td>{{ student.status }} </td>
             </tr>
             
            <tr>
            <th>Section: </th>
            <td>{{ student.Section }}</td>
             </tr>
            
            </table>
            
            
           </div>
        <div class="tablecontainer" style="display: inline-block; margin-left: 20px; width: 450px;">
           <table class="table table-bordered table-responsive ">
            <tr>
            <th  scope="col" class="bg-success">Subject</th>
            <th  scope="col" class="bg-success">Teacher</th>
            <th  scope="col" class="bg-success">Status</th>
        </tr>
        <tr>
            {% for i in section_subjects_faculty %}
                <td>{{ i.subjects.subject_code }}</td>
                <td>{{ i.faculty.first_name }} {{ i.faculty.last_name }}</td>
                <td>
                    {% for evaluation in student.evaluation_set.all %}
  <div class="faculty-evaluation">
    {{ evaluation.section_subject_faculty.faculty.name }} - {{ evaluation.section_subject_faculty.subject.name }}
    <span class="badge bg-success {% if evaluation.section_subject_faculty.status != 'Evaluated' %}d-none{% endif %}">Evaluated</span>
    <span class="badge bg-secondary {% if evaluation.section_subject_faculty.status == 'Evaluated' %}d-none{% endif %}">Not Evaluated</span>
  </div>
{% endfor %}
                </td>
        </tr>
    </div>
    </div>

    
    {% endfor %}
    
    </table>
    {% endblock feature %}

